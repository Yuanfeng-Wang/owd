# to apply patch:
# move the patch into the directory that contains owd
# patch -p0 < irs.patch
diff -rup -x .svn -x xenomai -N owd/CMakeLists.txt /home/ubuntu/ros/ros-pkg-irs/owd/CMakeLists.txt
--- owd/CMakeLists.txt	2009-07-08 08:38:01.000000000 -0700
+++ /home/ubuntu/ros/ros-pkg-irs/owd/CMakeLists.txt	2009-06-09 15:32:08.000000000 -0700
@@ -14,7 +14,7 @@ include_directories (openwam openmath es
 
 rospack_add_executable(owd owd.cpp openwamdriver.cpp)
 target_link_libraries(owd openwam openmath lapack blas ntcan native gfortran)
-add_definitions("-march=c3-2 -ggdb3 -DWRIST -DBH8")
+add_definitions("-march=core2 -mtune=native -mmmx -msse2 -msse3 -mfpmath=sse -ggdb3 -DWRIST -DBH8")
 #add_definitions("-march=c3-2 -ggdb3 -DFAKE7 -DBH8")
 
 # rospack_add_executable(cantest cantest.cc)
diff -rup -x .svn -x xenomai -N owd/openmath/CMakeLists.txt /home/ubuntu/ros/ros-pkg-irs/owd/openmath/CMakeLists.txt
--- owd/openmath/CMakeLists.txt	2009-07-08 08:38:18.000000000 -0700
+++ /home/ubuntu/ros/ros-pkg-irs/owd/openmath/CMakeLists.txt	2009-06-09 15:32:08.000000000 -0700
@@ -3,5 +3,5 @@ include($ENV{ROS_ROOT}/core/rosbuild/ros
 
 add_library(openmath STATIC Inertia.cc SE3.cc SO3.cc ZYX.cc)
 
-add_definitions("-march=c3-2 -ggdb3")
+add_definitions("-march=core2 -mtune=native -mmmx -msse2 -msse3 -mfpmath=sse -ggdb3")
 
diff -rup -x .svn -x xenomai -N owd/openwam/CMakeLists.txt /home/ubuntu/ros/ros-pkg-irs/owd/openwam/CMakeLists.txt
--- owd/openwam/CMakeLists.txt	2009-07-09 12:50:51.000000000 -0700
+++ ../owd/openwam/CMakeLists.txt	2009-06-09 10:49:46.000000000 -0700
@@ -4,7 +4,7 @@ include($ENV{ROS_ROOT}/core/rosbuild/ros
 add_subdirectory(positionInterface)
 link_directories (positionInterface)
 
-add_definitions("-march=c3-2 -ggdb3 -DWRIST -DBH8")
+add_definitions("-march=core2 -mtune=native -mmmx -msse2 -msse3 -mfpmath=sse -ggdb3 -DWRIST -DBH8")
 #add_definitions("-march=c3-2 -ggdb3 -DFAKE7 -DBH8")
 add_library(openwam STATIC  Joint.cc CANbus.cc Motor.cc Puck.cc Group.cc ControlLoop.cc Sigmoid.cc WAM.cc Kinematics.cc Dynamics.cc TrajType.cc PulseTraj.cc screenbuf.cc Trajectory.cc ParabolicSegment.cc ParaJointTraj.cc MacJointTraj.cc MacQuinticBlend.cc MacQuinticSegment.cc ServoTraj.cc JointCtrlSea.cc)

diff -rup -x .svn -x xenomai -N owd/openwam/WAM.hh /home/ubuntu/ros/ros-pkg-irs/owd/openwam/WAM.hh
--- owd/openwam/WAM.hh	2009-07-08 08:39:34.000000000 -0700
+++ /home/ubuntu/ros/ros-pkg-irs/owd/openwam/WAM.hh	2009-06-09 15:32:04.000000000 -0700
@@ -17,7 +17,7 @@
   along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
 //LLL
-//#define BUILD_FOR_SEA
+#define BUILD_FOR_SEA
 
 #include <semaphore.h>
 #include <list>
@@ -86,6 +86,7 @@ public:
 
 class WAM{
 public:
+  /*
   static const double mN1 = 41.782;  //joint ratios
   static const double mN2 = 27.836;
   static const double mN3 = 27.836;
@@ -93,6 +94,15 @@ public:
   static const double mN5 =  9.68163;
   static const double mN6 =  9.68163;
   static const double mN7 = 14.962;
+  */
+
+  static const double mN1 = 41.891; 
+  static const double mN2 = 27.662;
+  static const double mN3 = 27.662;
+  static const double mN4 = 17.718;
+  static const double mN5 = 9.64756;
+  static const double mN6 = 9.64756;
+  static const double mN7 = 15.577;
   static const double mn3 = 1.68;
   static const double mn6 = 1.00;
 
