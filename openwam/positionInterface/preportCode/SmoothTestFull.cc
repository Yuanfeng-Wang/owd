#include "SmoothArm.h"
#include "TPSTime.h"
#include <vector>

#define N_TARG 143 

int main(void) {

  int coarseTargTimes[N_TARG] =  
  {
   73637163, 73677462, 73718134, 73743879, 73812434, 73859885, 73919697, 73964375, 74010895, 74050165,
   74057466, 74147959, 74200546, 74241344, 74315730, 74475679, 74613280, 74653811, 74706907, 74812557,
   74853976, 74854036, 74855861, 74907934, 74946526, 75413880, 75450028, 75459020, 75625063, 75663757,
   75665167, 75700564, 75700610, 75743842, 75818499, 75853325, 75908205, 75959777, 76008971, 76156151,
   76203969, 76301886, 76337958, 76353248, 76406376, 76448532, 76448587, 76505803, 76545106, 76545342,
   76617953, 86456595, 86505747, 86540824, 86540870, 86554076, 86711231, 87638591, 87680037, 87680095,
   87682377, 87721051, 87721237, 87982326, 88016214, 88016261, 88016297, 88045659, 88111732, 88151758,
   88280854, 88316359, 88316406, 88675540, 88733487, 88928007, 88966150, 88966205, 88966254, 88979310,
   89012513, 89012560, 89012596, 89018344, 89615560, 89653501, 89653567, 89653617, 89686853, 89912692,
   89949776, 89949836, 89949885, 89949932, 90008246, 90119787, 90153811, 90153876, 90160677, 90208890,
   90247682, 90247731, 90263891, 90389333, 91123762, 91160135, 91174861, 91209243, 91312516, 91410422,
   91447044, 91447091, 91447127, 91518670, 91606481, 91646676, 91738796, 91894023, 91934250, 92060558,
   92111532, 92589676, 92718555, 92753093, 92753147, 92753183, 92753218, 92924041, 92962713, 92962866,
   92975472, 93012520, 93109029, 93144688, 93144752, 93208640, 93246693, 93320646, 93355981, 93427872,
   93549154, 93740825, 94129293 
  };


  float targPos[N_TARG] = 
  { 
   1.000000, 2.000000, 3.000000, 4.000000, 5.000000, 6.000000, 7.000000, 8.000000, 9.000000, 10.000000,
   11.000000, 12.000000, 13.000000, 14.000000, 15.000000, 16.000000, 17.000000, 18.000000, 19.000000, 21.000000,
   22.000000, 23.000000, 26.000000, 30.000000, 31.000000, 32.000000, 34.000000, 35.000000, 36.000000, 37.000000,
   38.000000, 39.000000, 40.000000, 41.000000, 43.000000, 44.000000, 46.000000, 47.000000, 48.000000, 49.000000,
   51.000000, 53.000000, 54.000000, 55.000000, 59.000000, 60.000000, 61.000000, 63.000000, 64.000000, 65.000000,
   66.000000, 67.000000, 69.000000, 70.000000, 71.000000, 72.000000, 73.000000, 74.000000, 75.000000, 77.000000,
   78.000000, 79.000000, 80.000000, 81.000000, 82.000000, 83.000000, 84.000000, 85.000000, 87.000000, 88.000000,
   89.000000, 90.000000, 91.000000, 92.000000, 93.000000, 94.000000, 95.000000, 97.000000, 99.000000, 104.000000,
   105.000000, 107.000000, 108.000000, 109.000000, 112.000000, 113.000000, 114.000000, 117.000000, 118.000000, 119.000000,
   120.000000, 122.000000, 123.000000, 124.000000, 126.000000, 128.000000, 129.000000, 130.000000, 131.000000, 132.000000,
   133.000000, 134.000000, 135.000000, 136.000000, 137.000000, 138.000000, 139.000000, 140.000000, 141.000000, 142.000000,
   143.000000, 144.000000, 145.000000, 147.000000, 148.000000, 149.000000, 150.000000, 151.000000, 152.000000, 153.000000,
   154.000000, 155.000000, 164.000000, 165.000000, 166.000000, 167.000000, 168.000000, 170.000000, 171.000000, 172.000000,
   173.000000, 174.000000, 175.000000, 176.000000, 177.000000, 179.000000, 180.000000, 181.000000, 182.000000, 183.000000,
   184.000000, 185.000000, 184.000000 
  };

  int i_targ;
  int hostTime;
  TPSTimeType hostCurTime;

  std::vector<float> targVec;
  //player_wamarm_jointset smoothSet;

  printf("targT=[];\n");
  printf("targP=[];\n");

  SmoothArm mySmoothArm;

  i_targ = 0;
  hostTime = coarseTargTimes[i_targ];
  hostCurTime.tv_sec = hostTime/1000000;
  hostCurTime.tv_usec = hostTime%1000000;
  targVec.clear();
  targVec.push_back(targPos[i_targ]);
  mySmoothArm.reset(hostCurTime, targVec); 

  for (i_targ = 1; i_targ < N_TARG; i_targ++) {
    hostTime = coarseTargTimes[i_targ];
    hostCurTime.tv_sec = hostTime/1000000;
    hostCurTime.tv_usec = hostTime%1000000;
    targVec.clear();
    targVec.push_back(targPos[i_targ]);
    mySmoothArm.setCoarseTarg(hostCurTime, targVec); 

    printf("targT=[targT, %d];\n", hostTime);
    printf("targP=[targP,%f];\n", targPos[i_targ] );
  }
}
